<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10 Web Server Configuration | The VY notebook</title>
  <meta name="description" content="This book has notes and understandings of articles and lectures taken by Vaibhav Yadav. These articles/chapters can be hard to understand as they are not written for explaining any topic but are for dumping the notes to refer back. if you have any suggestions, please email author at iYadavVaibhav [at] gmail [dot] com." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="10 Web Server Configuration | The VY notebook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book has notes and understandings of articles and lectures taken by Vaibhav Yadav. These articles/chapters can be hard to understand as they are not written for explaining any topic but are for dumping the notes to refer back. if you have any suggestions, please email author at iYadavVaibhav [at] gmail [dot] com." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10 Web Server Configuration | The VY notebook" />
  
  <meta name="twitter:description" content="This book has notes and understandings of articles and lectures taken by Vaibhav Yadav. These articles/chapters can be hard to understand as they are not written for explaining any topic but are for dumping the notes to refer back. if you have any suggestions, please email author at iYadavVaibhav [at] gmail [dot] com." />
  

<meta name="author" content="Vaibhav Yadav" />


<meta name="date" content="2020-08-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exercises-on-data-science.html"/>
<link rel="next" href="sqls.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The VY Notebook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="part"><span><b>I Data Science</b></span></li>
<li class="chapter" data-level="1" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>1</b> Probability</a><ul>
<li class="chapter" data-level="1.1" data-path="probability.html"><a href="probability.html#events"><i class="fa fa-check"></i><b>1.1</b> Events</a></li>
<li class="chapter" data-level="1.2" data-path="probability.html"><a href="probability.html#addition-rule"><i class="fa fa-check"></i><b>1.2</b> Addition Rule</a></li>
<li class="chapter" data-level="1.3" data-path="probability.html"><a href="probability.html#multiplication-rule"><i class="fa fa-check"></i><b>1.3</b> Multiplication Rule</a></li>
<li class="chapter" data-level="1.4" data-path="probability.html"><a href="probability.html#marginal-or-unconditional-probability"><i class="fa fa-check"></i><b>1.4</b> Marginal or Unconditional Probability:</a></li>
<li class="chapter" data-level="1.5" data-path="probability.html"><a href="probability.html#joint-probability"><i class="fa fa-check"></i><b>1.5</b> Joint Probability</a></li>
<li class="chapter" data-level="1.6" data-path="probability.html"><a href="probability.html#conditional-probability"><i class="fa fa-check"></i><b>1.6</b> Conditional Probability</a></li>
<li class="chapter" data-level="1.7" data-path="probability.html"><a href="probability.html#counting-events"><i class="fa fa-check"></i><b>1.7</b> Counting Events</a><ul>
<li class="chapter" data-level="1.7.1" data-path="probability.html"><a href="probability.html#permutation"><i class="fa fa-check"></i><b>1.7.1</b> Permutation</a></li>
<li class="chapter" data-level="1.7.2" data-path="probability.html"><a href="probability.html#combinations"><i class="fa fa-check"></i><b>1.7.2</b> Combinations</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="probability.html"><a href="probability.html#approach-to-solve-a-problem"><i class="fa fa-check"></i><b>1.8</b> Approach to solve a problem</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basic-statistics.html"><a href="basic-statistics.html"><i class="fa fa-check"></i><b>2</b> Basic Statistics</a><ul>
<li class="chapter" data-level="2.1" data-path="basic-statistics.html"><a href="basic-statistics.html#summarizing-quantitative-data"><i class="fa fa-check"></i><b>2.1</b> Summarizing Quantitative Data</a><ul>
<li class="chapter" data-level="2.1.1" data-path="basic-statistics.html"><a href="basic-statistics.html#effect-of-outliers"><i class="fa fa-check"></i><b>2.1.1</b> Effect of Outliers</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="basic-statistics.html"><a href="basic-statistics.html#spread-and-variation-of-data"><i class="fa fa-check"></i><b>2.2</b> Spread and Variation of Data</a></li>
<li class="chapter" data-level="2.3" data-path="basic-statistics.html"><a href="basic-statistics.html#measure-of-discrete-variables"><i class="fa fa-check"></i><b>2.3</b> Measure of Discrete Variables</a><ul>
<li class="chapter" data-level="2.3.1" data-path="basic-statistics.html"><a href="basic-statistics.html#expected-value"><i class="fa fa-check"></i><b>2.3.1</b> Expected Value</a></li>
<li class="chapter" data-level="2.3.2" data-path="basic-statistics.html"><a href="basic-statistics.html#expected-variance"><i class="fa fa-check"></i><b>2.3.2</b> Expected Variance</a></li>
<li class="chapter" data-level="2.3.3" data-path="basic-statistics.html"><a href="basic-statistics.html#expected-standard-deviation"><i class="fa fa-check"></i><b>2.3.3</b> Expected Standard Deviation</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="basic-statistics.html"><a href="basic-statistics.html#measure-of-relations"><i class="fa fa-check"></i><b>2.4</b> Measure of Relations</a><ul>
<li class="chapter" data-level="2.4.1" data-path="basic-statistics.html"><a href="basic-statistics.html#coefficient-of-variation"><i class="fa fa-check"></i><b>2.4.1</b> Coefficient of Variation</a></li>
<li class="chapter" data-level="2.4.2" data-path="basic-statistics.html"><a href="basic-statistics.html#covariance"><i class="fa fa-check"></i><b>2.4.2</b> Covariance</a></li>
<li class="chapter" data-level="2.4.3" data-path="basic-statistics.html"><a href="basic-statistics.html#coefficient-of-correlation"><i class="fa fa-check"></i><b>2.4.3</b> Coefficient of Correlation</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="basic-statistics.html"><a href="basic-statistics.html#shape-of-distribution"><i class="fa fa-check"></i><b>2.5</b> Shape of Distribution</a><ul>
<li class="chapter" data-level="2.5.1" data-path="basic-statistics.html"><a href="basic-statistics.html#skewness"><i class="fa fa-check"></i><b>2.5.1</b> Skewness</a></li>
<li class="chapter" data-level="2.5.2" data-path="basic-statistics.html"><a href="basic-statistics.html#kurtosis"><i class="fa fa-check"></i><b>2.5.2</b> Kurtosis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="advance-statistics.html"><a href="advance-statistics.html"><i class="fa fa-check"></i><b>3</b> Advance Statistics</a><ul>
<li class="chapter" data-level="3.1" data-path="advance-statistics.html"><a href="advance-statistics.html#frequency-distribution"><i class="fa fa-check"></i><b>3.1</b> Frequency Distribution</a></li>
<li class="chapter" data-level="3.2" data-path="advance-statistics.html"><a href="advance-statistics.html#probability-distribution-functions-pdf"><i class="fa fa-check"></i><b>3.2</b> Probability Distribution Functions (PDF)</a><ul>
<li class="chapter" data-level="3.2.1" data-path="advance-statistics.html"><a href="advance-statistics.html#bernoulli-distribution"><i class="fa fa-check"></i><b>3.2.1</b> Bernoulli Distribution</a></li>
<li class="chapter" data-level="3.2.2" data-path="advance-statistics.html"><a href="advance-statistics.html#binomial-probability-distribution"><i class="fa fa-check"></i><b>3.2.2</b> Binomial Probability Distribution</a></li>
<li class="chapter" data-level="3.2.3" data-path="advance-statistics.html"><a href="advance-statistics.html#poisson-probability-distribution"><i class="fa fa-check"></i><b>3.2.3</b> Poisson Probability Distribution</a></li>
<li class="chapter" data-level="3.2.4" data-path="advance-statistics.html"><a href="advance-statistics.html#uniform-distribution"><i class="fa fa-check"></i><b>3.2.4</b> Uniform Distribution</a></li>
<li class="chapter" data-level="3.2.5" data-path="advance-statistics.html"><a href="advance-statistics.html#normal-distribution"><i class="fa fa-check"></i><b>3.2.5</b> Normal Distribution</a></li>
<li class="chapter" data-level="3.2.6" data-path="advance-statistics.html"><a href="advance-statistics.html#standardized-normal-or-z-score"><i class="fa fa-check"></i><b>3.2.6</b> Standardized Normal or Z score</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="advance-statistics.html"><a href="advance-statistics.html#sampling-distributions"><i class="fa fa-check"></i><b>3.3</b> Sampling Distributions</a><ul>
<li class="chapter" data-level="3.3.1" data-path="advance-statistics.html"><a href="advance-statistics.html#developing-a-sampling-distributions"><i class="fa fa-check"></i><b>3.3.1</b> Developing a Sampling Distributions</a></li>
<li class="chapter" data-level="3.3.2" data-path="advance-statistics.html"><a href="advance-statistics.html#central-limit-theorem"><i class="fa fa-check"></i><b>3.3.2</b> Central Limit Theorem</a></li>
<li class="chapter" data-level="3.3.3" data-path="advance-statistics.html"><a href="advance-statistics.html#point-and-interval-estimates"><i class="fa fa-check"></i><b>3.3.3</b> Point and Interval Estimates</a></li>
<li class="chapter" data-level="3.3.4" data-path="advance-statistics.html"><a href="advance-statistics.html#confidence-intervals-and-levels"><i class="fa fa-check"></i><b>3.3.4</b> Confidence Intervals and Levels</a></li>
<li class="chapter" data-level="3.3.5" data-path="advance-statistics.html"><a href="advance-statistics.html#confidence-interval-sigma-unknown"><i class="fa fa-check"></i><b>3.3.5</b> Confidence Interval Sigma Unknown</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="advance-statistics.html"><a href="advance-statistics.html#estimators-and-point-estimates"><i class="fa fa-check"></i><b>3.4</b> Estimators and point estimates:</a><ul>
<li class="chapter" data-level="3.4.1" data-path="advance-statistics.html"><a href="advance-statistics.html#population-proportion"><i class="fa fa-check"></i><b>3.4.1</b> Population Proportion</a></li>
<li class="chapter" data-level="3.4.2" data-path="advance-statistics.html"><a href="advance-statistics.html#p-value-needs-elaboration"><i class="fa fa-check"></i><b>3.4.2</b> P Value (needs elaboration)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="blockchain.html"><a href="blockchain.html"><i class="fa fa-check"></i><b>4</b> Blockchain</a><ul>
<li class="chapter" data-level="4.1" data-path="blockchain.html"><a href="blockchain.html#why-blockchain"><i class="fa fa-check"></i><b>4.1</b> Why Blockchain?</a></li>
<li class="chapter" data-level="4.2" data-path="blockchain.html"><a href="blockchain.html#what-is-blockchain"><i class="fa fa-check"></i><b>4.2</b> What is Blockchain:</a><ul>
<li class="chapter" data-level="4.2.1" data-path="blockchain.html"><a href="blockchain.html#blockchain-flow"><i class="fa fa-check"></i><b>4.2.1</b> Blockchain Flow:</a></li>
<li class="chapter" data-level="4.2.2" data-path="blockchain.html"><a href="blockchain.html#consensus-mechanism"><i class="fa fa-check"></i><b>4.2.2</b> Consensus Mechanism:</a></li>
<li class="chapter" data-level="4.2.3" data-path="blockchain.html"><a href="blockchain.html#types-of-blockchain"><i class="fa fa-check"></i><b>4.2.3</b> Types of Blockchain:</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="blockchain.html"><a href="blockchain.html#blockchain-implementations"><i class="fa fa-check"></i><b>4.3</b> Blockchain implementations</a><ul>
<li class="chapter" data-level="4.3.1" data-path="blockchain.html"><a href="blockchain.html#bitcoin-btc"><i class="fa fa-check"></i><b>4.3.1</b> Bitcoin BTC</a></li>
<li class="chapter" data-level="4.3.2" data-path="blockchain.html"><a href="blockchain.html#hyperledger-fabric"><i class="fa fa-check"></i><b>4.3.2</b> Hyperledger Fabric</a></li>
<li class="chapter" data-level="4.3.3" data-path="blockchain.html"><a href="blockchain.html#ethereum"><i class="fa fa-check"></i><b>4.3.3</b> Ethereum</a></li>
<li class="chapter" data-level="4.3.4" data-path="blockchain.html"><a href="blockchain.html#agritech-blockchain"><i class="fa fa-check"></i><b>4.3.4</b> Agritech Blockchain</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="blockchain.html"><a href="blockchain.html#blockchain-in-healthcare"><i class="fa fa-check"></i><b>4.4</b> Blockchain in Healthcare</a></li>
<li class="chapter" data-level="4.5" data-path="blockchain.html"><a href="blockchain.html#blockchain-in-banking-industry"><i class="fa fa-check"></i><b>4.5</b> Blockchain in Banking Industry</a><ul>
<li class="chapter" data-level="4.5.1" data-path="blockchain.html"><a href="blockchain.html#blockchain-features-and-its-use-in-banking-industry"><i class="fa fa-check"></i><b>4.5.1</b> Blockchain features and its use in Banking Industry</a></li>
<li class="chapter" data-level="4.5.2" data-path="blockchain.html"><a href="blockchain.html#how-blockchain-can-help-banking-industry-grow-and-achieve-pre-eminence"><i class="fa fa-check"></i><b>4.5.2</b> How blockchain can help Banking Industry grow and achieve pre-eminence?</a></li>
<li class="chapter" data-level="4.5.3" data-path="blockchain.html"><a href="blockchain.html#vision-and-goal-of-blockchain-in-banking-industry"><i class="fa fa-check"></i><b>4.5.3</b> Vision and Goal of blockchain in Banking Industry</a></li>
<li class="chapter" data-level="4.5.4" data-path="blockchain.html"><a href="blockchain.html#blockchain-architecture-in-banking-industry"><i class="fa fa-check"></i><b>4.5.4</b> Blockchain Architecture in Banking Industry</a></li>
<li class="chapter" data-level="4.5.5" data-path="blockchain.html"><a href="blockchain.html#timeline-of-implementing-blockchain-in-banking-industry"><i class="fa fa-check"></i><b>4.5.5</b> Timeline of implementing blockchain in Banking Industry</a></li>
<li class="chapter" data-level="4.5.6" data-path="blockchain.html"><a href="blockchain.html#things-to-consider-before-using-blockchain-in-banking-industry"><i class="fa fa-check"></i><b>4.5.6</b> Things to Consider before using blockchain in Banking Industry</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="numpy.html"><a href="numpy.html"><i class="fa fa-check"></i><b>5</b> NumPy</a><ul>
<li class="chapter" data-level="5.1" data-path="numpy.html"><a href="numpy.html#numpy-arrays"><i class="fa fa-check"></i><b>5.1</b> Numpy Arrays</a><ul>
<li class="chapter" data-level="5.1.1" data-path="numpy.html"><a href="numpy.html#arange"><i class="fa fa-check"></i><b>5.1.1</b> arange</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="numpy.html"><a href="numpy.html#differences"><i class="fa fa-check"></i><b>5.2</b> Differences</a></li>
<li class="chapter" data-level="5.3" data-path="numpy.html"><a href="numpy.html#functions"><i class="fa fa-check"></i><b>5.3</b> Functions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="python.html"><a href="python.html"><i class="fa fa-check"></i><b>6</b> Python</a><ul>
<li class="chapter" data-level="6.0.1" data-path="python.html"><a href="python.html#map-and-filter"><i class="fa fa-check"></i><b>6.0.1</b> Map and Filter</a></li>
<li class="chapter" data-level="6.1" data-path="python.html"><a href="python.html#web-dev-libs"><i class="fa fa-check"></i><b>6.1</b> Web Dev Libs</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>7</b> Data Wrangling</a><ul>
<li class="chapter" data-level="7.1" data-path="data-wrangling.html"><a href="data-wrangling.html#what-is-data-manipulation"><i class="fa fa-check"></i><b>7.1</b> What is Data Manipulation?</a><ul>
<li class="chapter" data-level="7.1.1" data-path="data-wrangling.html"><a href="data-wrangling.html#filter"><i class="fa fa-check"></i><b>7.1.1</b> Filter</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="data-wrangling.html"><a href="data-wrangling.html#doing-same-stuff-using-r"><i class="fa fa-check"></i><b>7.2</b> Doing same stuff using R</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>8</b> Logistic Regression</a><ul>
<li class="chapter" data-level="8.0.1" data-path="logistic-regression.html"><a href="logistic-regression.html#difference-between-logistic-and-linear-equations"><i class="fa fa-check"></i><b>8.0.1</b> Difference between logistic and linear equations</a></li>
<li class="chapter" data-level="8.0.2" data-path="logistic-regression.html"><a href="logistic-regression.html#model-evaluation"><i class="fa fa-check"></i><b>8.0.2</b> Model Evaluation</a></li>
<li class="chapter" data-level="8.0.3" data-path="logistic-regression.html"><a href="logistic-regression.html#accuracy"><i class="fa fa-check"></i><b>8.0.3</b> Accuracy:</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="exercises-on-data-science.html"><a href="exercises-on-data-science.html"><i class="fa fa-check"></i><b>9</b> Exercises on data science</a><ul>
<li class="chapter" data-level="9.1" data-path="exercises-on-data-science.html"><a href="exercises-on-data-science.html#plotly"><i class="fa fa-check"></i><b>9.1</b> Plotly</a></li>
<li class="chapter" data-level="9.2" data-path="exercises-on-data-science.html"><a href="exercises-on-data-science.html#seaborn"><i class="fa fa-check"></i><b>9.2</b> Seaborn</a></li>
</ul></li>
<li class="part"><span><b>II DWeb Development</b></span></li>
<li class="chapter" data-level="10" data-path="web-server-configuration.html"><a href="web-server-configuration.html"><i class="fa fa-check"></i><b>10</b> Web Server Configuration</a><ul>
<li class="chapter" data-level="10.1" data-path="web-server-configuration.html"><a href="web-server-configuration.html#ubuntu-server-configuration"><i class="fa fa-check"></i><b>10.1</b> Ubuntu Server Configuration</a></li>
<li class="chapter" data-level="10.2" data-path="web-server-configuration.html"><a href="web-server-configuration.html#install-apache2-php-and-mysql-using-lamp"><i class="fa fa-check"></i><b>10.2</b> Install Apache2 PHP and MySQL using LAMP</a></li>
<li class="chapter" data-level="10.3" data-path="web-server-configuration.html"><a href="web-server-configuration.html#domain-configuration"><i class="fa fa-check"></i><b>10.3</b> Domain Configuration</a><ul>
<li class="chapter" data-level="10.3.1" data-path="web-server-configuration.html"><a href="web-server-configuration.html#add-sites-to-apache-server"><i class="fa fa-check"></i><b>10.3.1</b> Add sites to Apache Server</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="web-server-configuration.html"><a href="web-server-configuration.html#mysql-database-configuration"><i class="fa fa-check"></i><b>10.4</b> MySQL Database Configuration</a></li>
<li class="chapter" data-level="10.5" data-path="web-server-configuration.html"><a href="web-server-configuration.html#wordpress-installation-on-ubuntu-server"><i class="fa fa-check"></i><b>10.5</b> Wordpress Installation on Ubuntu Server</a></li>
<li class="chapter" data-level="10.6" data-path="web-server-configuration.html"><a href="web-server-configuration.html#web-server-tuning"><i class="fa fa-check"></i><b>10.6</b> Web Server Tuning</a></li>
<li class="chapter" data-level="10.7" data-path="web-server-configuration.html"><a href="web-server-configuration.html#how-to-add-multiple-domains-on-apache-web-server"><i class="fa fa-check"></i><b>10.7</b> How to add multiple domains on Apache Web Server</a></li>
<li class="chapter" data-level="10.8" data-path="web-server-configuration.html"><a href="web-server-configuration.html#serve-python-files-on-apache-web-server"><i class="fa fa-check"></i><b>10.8</b> Serve Python files on Apache Web Server</a><ul>
<li class="chapter" data-level="10.8.1" data-path="web-server-configuration.html"><a href="web-server-configuration.html#cgi-scripts"><i class="fa fa-check"></i><b>10.8.1</b> CGI Scripts:</a></li>
<li class="chapter" data-level="10.8.2" data-path="web-server-configuration.html"><a href="web-server-configuration.html#wsgi"><i class="fa fa-check"></i><b>10.8.2</b> WSGI:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="sqls.html"><a href="sqls.html"><i class="fa fa-check"></i><b>11</b> SQLs</a><ul>
<li class="chapter" data-level="11.1" data-path="sqls.html"><a href="sqls.html#sqlite"><i class="fa fa-check"></i><b>11.1</b> SQLite</a></li>
<li class="chapter" data-level="11.2" data-path="sqls.html"><a href="sqls.html#sqlalchemy"><i class="fa fa-check"></i><b>11.2</b> SQLAlchemy</a></li>
<li class="chapter" data-level="11.3" data-path="sqls.html"><a href="sqls.html#mysql"><i class="fa fa-check"></i><b>11.3</b> MySQL</a></li>
<li class="chapter" data-level="11.4" data-path="sqls.html"><a href="sqls.html#mongo-db"><i class="fa fa-check"></i><b>11.4</b> Mongo DB</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The VY notebook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="web-server-configuration" class="section level1">
<h1><span class="header-section-number">10</span> Web Server Configuration</h1>
<p>Web server can be a linux server that takes client requests and provides a response. It can host a web app. Web app can be backed by a programming language that and process data and store this data in a database.</p>
<p>In this article we would be covering all that is listed in contents below. It is assumed that you have a machine with Ubuntu server installed. It can be on cloud like <a href="../google-cloud-platform-notes">GCP</a> or AWS etc, or it can be on a virtual machine via <a href="../vagrant-virtualbox-notes">Vagrant</a> and Virtual Box.</p>
<div id="ubuntu-server-configuration" class="section level2">
<h2><span class="header-section-number">10.1</span> Ubuntu Server Configuration</h2>
<p>Now that you are connected to host VM via SSH, let’s start with:
- Updating Ubuntu: <code>sudo apt update &amp;&amp; sudo apt upgrade</code>
- Check ram and CPU usage <code>htop</code> , we see that we do not have swap memory, this helps in low ram system when on high load.</p>
<p>Adding the swap memory:
- Lets allocate 1GB swap memory: <code>sudo fallocate -l 1G /swapfile</code>
- <code>sudo dd if=/dev/zero of=/swapfile bs=1024 count=1048576</code>
- Assign the correct permission to swapfile: <code>sudo chmod 600 /swapfile</code>
- make the swap: <code>sudo mkswap /swapfile</code>
- Turn on the swapfile: <code>sudo swapon /swapfile</code>
- edit the fstab file: <code>sudo nano /etc/fstab</code>
- add this line to the end of file: <code>/swapfile swap swap defaults 0 0</code>
- mount the files: <code>sudo mount -a</code>
- Check ram and cpu again to verify swap: <code>htop</code></p>
</div>
<div id="install-apache2-php-and-mysql-using-lamp" class="section level2">
<h2><span class="header-section-number">10.2</span> Install Apache2 PHP and MySQL using LAMP</h2>
<p>Install the softwares using below commands:
- <code>sudo apt install tasksel</code>
- <code>sudo tasksel install lamp-server</code>
- <code>sudo apt install php-curl php-gd php-mbstring php-xml php-xmlrpc</code>
- Get the external IP address: <code>curl ifconfig.me</code>
- Type <a href="http://123.456.789.10" class="uri">http://123.456.789.10</a> , the external IP address in browser to see served page.</p>
</div>
<div id="domain-configuration" class="section level2">
<h2><span class="header-section-number">10.3</span> Domain Configuration</h2>
<p>Now we need to point the domain to this webserver so that we can access files server. We will use <code>example123.com</code> in this example.</p>
<p>Only if you do not have a domain to point to server and want to use vhost:
- Modify the host file to add virtual hosts: <code>sudo nano /etc/hosts</code>
- To map ‘example123.com’ tp IP address add this line: <code>35.111.00.111 example123.com</code></p>
<p>If you have a domain,
- edit DNS records and add ‘A-record’ with the external IP address, for eg:
- host: *
- IP: 35.111.00.111
- then, <code>example123.com</code> will open the page from GCP VM machine.
- You may also reserve static external IP address of VM on GCP:
- From your GCP dashboard find ‘Networking &gt; External IP addresses’.
- Now click the down arrow under the ‘Type’ column and select ‘Static’ for the External IP address which is connected to your instance of GCP Compute Engine.
- By reserving a Static IP Address you will not loose your access to website after server outages or restarts.</p>
<div id="add-sites-to-apache-server" class="section level3">
<h3><span class="header-section-number">10.3.1</span> Add sites to Apache Server</h3>
<p>Now we need to enable sites on apache we server to connect domain with dir of files to be served by this server.</p>
<ul>
<li><code>cd /etc/apache2/sites-available/</code></li>
<li><code>ls -l</code></li>
<li>Copy configuration file for new domain to be added: <code>sudo cp 000-default.conf example123.com.conf</code></li>
<li>Let us switch to root user: <code>sudo su</code></li>
<li>edit: <code>nano example123.com.conf</code> and add following content to file:</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="op">&lt;</span>Directory <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>html<span class="op">/</span>example123.com<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  Require <span class="bu">all</span> granted</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="op">&lt;/</span>Directory<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="op">&lt;</span>VirtualHost <span class="op">*</span>:<span class="dv">80</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  ServerName example123.com</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">  ServerAlias www.example123.com</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">  ServerAdmin webmaster<span class="op">@</span>localhost</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">  DocumentRoot <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>html<span class="op">/</span>example123.com</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">  ErrorLog ${APACHE_LOG_DIR}<span class="op">/</span>error.log</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">  CustomLog ${APACHE_LOG_DIR}<span class="op">/</span>access.log combined</a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="op">&lt;/</span>VirtualHost<span class="op">&gt;</span></a></code></pre></div>
<ul>
<li>disable default site: <code>a2dissite 000-default.conf</code></li>
<li>enable new site: <code>a2ensite example123.com.conf</code></li>
<li>restart apache service: <code>systemctl reload apache2</code></li>
<li>go to web documents location: <code>cd /var/www/html</code></li>
<li>create directory for new site: <code>mkdir example123.com</code></li>
<li><code>cd example123.com</code> go in the directory.</li>
<li><code>nano index.html</code> create an html file.</li>
<li>Now open browser and goto ‘example123.com’ you should see the contents of index.html.</li>
</ul>
</div>
</div>
<div id="mysql-database-configuration" class="section level2">
<h2><span class="header-section-number">10.4</span> MySQL Database Configuration</h2>
<p>Now we will configure MySQL database so that we can use that in our web apps.</p>
<ul>
<li><code>mysql -u root</code></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb7-1" data-line-number="1">&gt; <span class="kw">CREATE</span> <span class="kw">DATABASE</span> db123;  </a>
<a class="sourceLine" id="cb7-2" data-line-number="2">&gt; <span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">ON</span> db123.* <span class="kw">TO</span> <span class="st">&#39;db123_user&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;db123_pwd!&#39;</span>;  </a>
<a class="sourceLine" id="cb7-3" data-line-number="3">&gt; quit;  </a></code></pre></div>
<ul>
<li>Secure the installation <code>mysql_secure_installation</code>, select Y for all or as per your need.</li>
</ul>
<p>Configure PHP:
- <code>nano /etc/php/7.2/apache2/php.ini</code>
- update:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb8-1" data-line-number="1">upload<span class="op">\</span>_max<span class="op">\</span>_filesize <span class="op">=</span> 20M  </a>
<a class="sourceLine" id="cb8-2" data-line-number="2">post<span class="op">\</span>_max<span class="op">\</span>_size <span class="op">=</span> 21M</a></code></pre></div>
<p>Congratulations, can you believe we are already done! We can create and host any webapp on one of the Worlds biggest cloud infrastructure, GCP, and its scalable!</p>
</div>
<div id="wordpress-installation-on-ubuntu-server" class="section level2">
<h2><span class="header-section-number">10.5</span> Wordpress Installation on Ubuntu Server</h2>
<p>Now that we have Apache, PHP and MySQL configured, connected and working together, we can start developing web apps. Wordpress is a easy to use CMS in PHP, lets get started with installing wordpress.</p>
<ul>
<li><code>cd /var/www/html/example123.com/</code></li>
<li>download wordpress: <code>wget https://wordpress.org/latest.tar.gz</code></li>
<li>Unzip the file <code>tar -xvf latest.tar.gz</code></li>
<li><code>mv wp-config-sample.php wp-config.php</code></li>
<li><code>nano wp-config.php</code></li>
</ul>
</div>
<div id="web-server-tuning" class="section level2">
<h2><span class="header-section-number">10.6</span> Web Server Tuning</h2>
<p>Configure MPM_Prefork.conf to manage apache load performance:
- <code>nano /etc/apache2/mods-enabled/mpm_prefork.conf</code>
- Update to below:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="op">&lt;</span>IfModule mpm_prefork_module<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">  StartServers    <span class="dv">1</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3">  MinSpareServers   <span class="dv">2</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4">  MaxSpareServers   <span class="dv">5</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5">  MaxRequestWorkers <span class="dv">10</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6">  MaxConnectionsPerChild  <span class="dv">1000</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="op">&lt;/</span>IfModule<span class="op">&gt;</span></a></code></pre></div>
<p>Tune the new Apache install:
- <code>cd ~</code>
- <code>wget https://raw.githubusercontent.com/richardforth/apache2buddy/master/apache2buddy.pl</code>
- <code>chmod +x apache2buddy.pl</code>
- <code>./apache2buddy.pl</code>
- This perl script tells the health of Apache server.</p>
<p>User guides:
- video used: <a href="https://youtu.be/vIJdypOqlL4">YouTube</a></p>
</div>
<div id="how-to-add-multiple-domains-on-apache-web-server" class="section level2">
<h2><span class="header-section-number">10.7</span> How to add multiple domains on Apache Web Server</h2>
<p>We can host multiple sites on one server with vistual hosts in Apache.</p>
<ul>
<li>create conf file <code>cd /etc/apache2/sites-available/</code> then <code>sudo cp 000-default.conf addonDomain.com.conf</code></li>
<li>open conf file using nano, then edit</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="op">&lt;</span>Directory <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>html<span class="op">/</span>addonDomain.com<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">  Require <span class="bu">all</span> granted  </a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="op">&lt;/</span>Directory<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="op">&lt;</span>VirtualHost <span class="op">*</span>:<span class="dv">80</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5">  ServerName example.com</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">  ServerAlias www.example.com</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">  ServerAdmin admin<span class="op">@</span>example.com</a>
<a class="sourceLine" id="cb10-8" data-line-number="8">  DocumentRoot <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>example.com<span class="op">/</span>html</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="op">&lt;/</span>VirtualHost<span class="op">&gt;</span></a></code></pre></div>
<ul>
<li>make folders <code>mkdir var/www/html/addonDomain.com/</code></li>
<li>enable site:</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb11-1" data-line-number="1">$ a2ensite example.com.conf</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">$ systemctl <span class="bu">reload</span> apache2</a></code></pre></div>
<ul>
<li>More details <a href="https://www.hiyansoft.com/blog/cloud/google/hosting-multiple-websites-on-single-google-cloud-compute-engine/index.html">here</a>.</li>
</ul>
</div>
<div id="serve-python-files-on-apache-web-server" class="section level2">
<h2><span class="header-section-number">10.8</span> Serve Python files on Apache Web Server</h2>
<p>Python files can be served via CGI or WSGI. Python is language, Apache2 is webServer, CGI and WSGI are protocol to help web server and language talk to each other.</p>
<div id="cgi-scripts" class="section level3">
<h3><span class="header-section-number">10.8.1</span> CGI Scripts:</h3>
<p>Common Gateway Interface or CGI provides interface for web server to serve HTML from console programs like Python.
- By CGI we can directly open <code>index.py</code> in browser and it works like PHP file. It outputs the result of the script file.
- default directory is <code>/usr/lib/cgi-bin/</code>, you can add, <code>hello.cgi</code> here and open in browser.
- enable in apache: <code>a2dismod mpm_event</code>
- enable cgi module: <code>a2enmod mpm_prefork cgi</code>
- to make new dir for cgi files, add following to site conf file:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="op">&lt;</span>VirtualHost <span class="op">*</span>:<span class="dv">80</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">  ...</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">  <span class="op">&lt;</span>Directory <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>html<span class="op">/</span>cgi_dir<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4">    Options <span class="op">+</span>ExecCGI</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">    AddHandler cgi<span class="op">-</span>script .py .cgi</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">    <span class="co"># DirectoryIndex index.py</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7">  <span class="op">&lt;/</span>Directory<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8">  ...</a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="op">&lt;/</span>VirtualHost<span class="op">&gt;</span></a></code></pre></div>
<ul>
<li>CGI runs script when requested, where as WSGI runs script with start of WebServer.</li>
</ul>
</div>
<div id="wsgi" class="section level3">
<h3><span class="header-section-number">10.8.2</span> WSGI:</h3>
<p>Web Server Gateway Interface or WSGI is a simple calling convention for web servers to forward requests to web applications.</p>
<ul>
<li><code>mod_wsgi</code> is an Apache HTTP Server module that provides a WSGI compliant interface for hosting Python based web applications. It is an alternative to CGI.</li>
</ul>
<div id="flask-wsgi-and-apache2-on-linux-hands-on" class="section level4">
<h4><span class="header-section-number">10.8.2.1</span> Flask, WSGI and Apache2 on Linux [Hands On]</h4>
<p>Assuming you have a working apache2 server and you have python installed. Next we need to install pip and WSGI module.</p>
<p>Python 3:
- <code>sudo apt-get install libapache2-mod-wsgi-py3</code>
- <code>sudo apt-get install python3-pip</code></p>
<p>Python 2:
- <code>sudo apt-get install libapache2-mod-wsgi</code>
- <code>sudo apt-get install python-pip</code></p>
<p>Enable WSGI and install flask:
- <code>a2enmod wsgi</code> enable the WSGI module in apache.
- <code>pip3 install flask</code></p>
<p>Set up directory and flask files:
- <code>mkdir /var/www/apps</code> this contains all flask apps.
- <code>mkdir /var/www/apps/blog</code> this is our first app.
- <code>mkdir /var/www/apps/blog/lib</code> this contains code for our blog app.
- <code>mkdir /var/www/apps/blog/lib/static</code> this will serve static files for our blog app.</p>
<p>Make flask app:
- <code>sudo nano /var/www/apps/blog/lib/main.py</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="im">from</span> flask <span class="im">import</span> Flask</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">app <span class="op">=</span> Flask(<span class="va">__name__</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="at">@app.route</span>(<span class="st">&#39;/&#39;</span>)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="kw">def</span> hello_world():</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">  <span class="cf">return</span> <span class="st">&#39;Hello from Flask blog app!&#39;</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">  app.run()</a></code></pre></div>
<p>Make this folder as python module, (important):
- <code>touch /var/www/apps/blog/lib/__init__.py</code>
- We created <code>__init__.py</code> as a blank file. This is important and is required to import our lib folder as a python module. Now we can import <code>lib.main</code> in wsgi file.</p>
<p>Add the wsgi file:
- <code>sudo nano /var/www/apps/blog/app.wsgi</code></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="im">import</span> sys</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">sys.path.insert(<span class="dv">0</span>, <span class="st">&#39;/var/www/apps/blog&#39;</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="im">from</span> lib.main <span class="im">import</span> app <span class="im">as</span> application</a></code></pre></div>
<p>Configuring virtual hosts conf file to make it work:
- <strong>Imp</strong>, in exmple below, replace ‘myapps.com’ with your domain name.
- <code>cd /etc/apache2/sites-available/</code>
- add a site file <code>cp 000-default.conf myapps.com.conf</code>
- <code>nano myapps.com.conf</code></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="op">&lt;</span>VirtualHost <span class="op">*</span>:<span class="dv">80</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">  ServerName myapps.com</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">  ServerAdmin webmaster<span class="op">@</span>localhost</a>
<a class="sourceLine" id="cb15-4" data-line-number="4"></a>
<a class="sourceLine" id="cb15-5" data-line-number="5">  <span class="co"># This is path for homepage of myapps.com</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6">  DocumentRoot <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>html<span class="op">/</span>myapps.com</a>
<a class="sourceLine" id="cb15-7" data-line-number="7"></a>
<a class="sourceLine" id="cb15-8" data-line-number="8">  <span class="co"># App: blog, URL: http://myapps.com/myblog</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9">  WSGIScriptAlias <span class="op">/</span>myblog <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>apps<span class="op">/</span>blog<span class="op">/</span>app.wsgi</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">  <span class="op">&lt;</span>Directory <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>apps<span class="op">/</span>blog<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11">    Order deny,allow</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">    Allow <span class="im">from</span> <span class="bu">all</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13">  <span class="op">&lt;/</span>Directory<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14">  Alias <span class="op">/</span>myblog<span class="op">/</span>static <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>apps<span class="op">/</span>blog<span class="op">/</span>lib<span class="op">/</span>static</a>
<a class="sourceLine" id="cb15-15" data-line-number="15"></a>
<a class="sourceLine" id="cb15-16" data-line-number="16">  <span class="co"># Enables passing of authorization headers</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17">  WSGIPassAuthorization On</a>
<a class="sourceLine" id="cb15-18" data-line-number="18"></a>
<a class="sourceLine" id="cb15-19" data-line-number="19">  <span class="co"># logs configuration</span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20">  ErrorLog ${APACHE_LOG_DIR}<span class="op">/</span>error.log</a>
<a class="sourceLine" id="cb15-21" data-line-number="21">  CustomLog ${APACHE_LOG_DIR}<span class="op">/</span>access.log combined</a>
<a class="sourceLine" id="cb15-22" data-line-number="22"></a>
<a class="sourceLine" id="cb15-23" data-line-number="23"><span class="op">&lt;/</span>VirtualHost<span class="op">&gt;</span></a></code></pre></div>
<ul>
<li><code>a2ensite myapps.com.conf</code> enable the site.</li>
<li><code>service apache2 restart</code> restart the service.</li>
<li>Now visit <code>http://myapps.com/myblog/</code> to access app.</li>
</ul>
<p>If you see errors:
- <code>tail -30 /var/log/apache2/error.log</code> shows you error logs from apache server.</p>
<hr />
</div>
<div id="multiple-flask-apps-and-adding-user-and-group-to-process" class="section level4">
<h4><span class="header-section-number">10.8.2.2</span> Multiple Flask apps and adding user and group to process</h4>
<ul>
<li>Add new user <code>adduser apps</code>, remember password here</li>
<li>update primary group <code>usermod -g www-data apps</code></li>
<li><p>give permission to group <code>chmod 775 /home/apps</code></p></li>
<li>login with new user <code>apps</code></li>
<li><code>git clone the_web_app.git</code></li>
<li><code>python3 -m venv venv</code></li>
<li><code>source venv/bin/activate</code></li>
<li><code>pip3 install -r requirements.txt</code></li>
<li><code>touch __init__.py</code></li>
<li><p>add <code>app.wsgi</code></p></li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co">#!venv/bin/python3</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="im">import</span> sys</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="im">import</span> logging</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">logging.basicConfig(stream<span class="op">=</span>sys.stderr)</a>
<a class="sourceLine" id="cb16-5" data-line-number="5"></a>
<a class="sourceLine" id="cb16-6" data-line-number="6">sys.path.insert(<span class="dv">0</span>, <span class="st">&#39;/home/apps/todo&#39;</span>)</a>
<a class="sourceLine" id="cb16-7" data-line-number="7"></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="im">from</span> lib.main <span class="im">import</span> app <span class="im">as</span> application</a></code></pre></div>
<p>Apache v-host file:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode py"><code class="sourceCode python"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="op">&lt;</span>VirtualHost <span class="op">*</span>:<span class="dv">80</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">  ServerName py.ess.com</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">  ServerAdmin webmaster<span class="op">@</span>localhost</a>
<a class="sourceLine" id="cb17-4" data-line-number="4"></a>
<a class="sourceLine" id="cb17-5" data-line-number="5">  DocumentRoot <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>html<span class="op">/</span>py.ess.com</a>
<a class="sourceLine" id="cb17-6" data-line-number="6"></a>
<a class="sourceLine" id="cb17-7" data-line-number="7">  WSGIScriptAlias <span class="op">/</span>site1 <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>apps<span class="op">/</span>app1<span class="op">/</span>app1.wsgi</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">  <span class="op">&lt;</span>Directory <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>apps<span class="op">/</span>app1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb17-9" data-line-number="9">    Order deny,allow</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">    Allow <span class="im">from</span> <span class="bu">all</span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11">  <span class="op">&lt;/</span>Directory<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb17-12" data-line-number="12">  Alias <span class="op">/</span>site1<span class="op">/</span>static <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>apps<span class="op">/</span>app1<span class="op">/</span>static</a>
<a class="sourceLine" id="cb17-13" data-line-number="13"></a>
<a class="sourceLine" id="cb17-14" data-line-number="14">  WSGIScriptAlias <span class="op">/</span>flap <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>apps<span class="op">/</span>flap<span class="op">/</span>app.wsgi</a>
<a class="sourceLine" id="cb17-15" data-line-number="15">  <span class="op">&lt;</span>Directory <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>apps<span class="op">/</span>flap<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb17-16" data-line-number="16">    Order deny,allow</a>
<a class="sourceLine" id="cb17-17" data-line-number="17">    Allow <span class="im">from</span> <span class="bu">all</span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18">  <span class="op">&lt;/</span>Directory<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb17-19" data-line-number="19"></a>
<a class="sourceLine" id="cb17-20" data-line-number="20"></a>
<a class="sourceLine" id="cb17-21" data-line-number="21">        WSGIScriptAlias <span class="op">/</span>todo <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>apps<span class="op">/</span>todo<span class="op">/</span>app.wsgi</a>
<a class="sourceLine" id="cb17-22" data-line-number="22">        <span class="op">&lt;</span>Directory <span class="op">/</span>var<span class="op">/</span>www<span class="op">/</span>apps<span class="op">/</span>todo<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb17-23" data-line-number="23">                Order deny,allow</a>
<a class="sourceLine" id="cb17-24" data-line-number="24">                Allow <span class="im">from</span> <span class="bu">all</span></a>
<a class="sourceLine" id="cb17-25" data-line-number="25">        <span class="op">&lt;/</span>Directory<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb17-26" data-line-number="26"></a>
<a class="sourceLine" id="cb17-27" data-line-number="27">  WSGIDaemonProcess todo<span class="op">-</span>client user<span class="op">=</span>apps group<span class="op">=</span>www<span class="op">-</span>data threads<span class="op">=</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb17-28" data-line-number="28">        WSGIScriptAlias <span class="op">/</span>todo<span class="op">-</span>client <span class="op">/</span>home<span class="op">/</span>apps<span class="op">/</span>todo<span class="op">/</span>app.wsgi</a>
<a class="sourceLine" id="cb17-29" data-line-number="29">        <span class="op">&lt;</span>Directory <span class="op">/</span>home<span class="op">/</span>apps<span class="op">/</span>todo<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb17-30" data-line-number="30">    WSGIApplicationGroup todo<span class="op">-</span>client</a>
<a class="sourceLine" id="cb17-31" data-line-number="31">    WSGIProcessGroup todo<span class="op">-</span>client</a>
<a class="sourceLine" id="cb17-32" data-line-number="32">                Order deny,allow</a>
<a class="sourceLine" id="cb17-33" data-line-number="33">                Allow <span class="im">from</span> <span class="bu">all</span></a>
<a class="sourceLine" id="cb17-34" data-line-number="34">    Require <span class="bu">all</span> granted</a>
<a class="sourceLine" id="cb17-35" data-line-number="35">        <span class="op">&lt;/</span>Directory<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb17-36" data-line-number="36">  Alias <span class="op">/</span>todo<span class="op">-</span>client<span class="op">/</span>static <span class="op">/</span>home<span class="op">/</span>apps<span class="op">/</span>todo<span class="op">/</span>lib<span class="op">/</span>static</a>
<a class="sourceLine" id="cb17-37" data-line-number="37">  WSGIPassAuthorization On</a>
<a class="sourceLine" id="cb17-38" data-line-number="38"></a>
<a class="sourceLine" id="cb17-39" data-line-number="39"></a>
<a class="sourceLine" id="cb17-40" data-line-number="40">  <span class="co"># WSGIDaemonProcess site2 user=myserviceuser group=myserviceuser threads=5 python-home=/$</span></a>
<a class="sourceLine" id="cb17-41" data-line-number="41">  <span class="co"># WSGIScriptAlias /site2 /var/www/apps/app2/application.wsgi</span></a>
<a class="sourceLine" id="cb17-42" data-line-number="42">  <span class="co"># &lt;Directory /var/www/apps/app2&gt;</span></a>
<a class="sourceLine" id="cb17-43" data-line-number="43">  <span class="co">#     WSGIApplicationGroup site2</span></a>
<a class="sourceLine" id="cb17-44" data-line-number="44">  <span class="co">#     WSGIProcessGroup site2</span></a>
<a class="sourceLine" id="cb17-45" data-line-number="45">  <span class="co">#     Order deny,allow</span></a>
<a class="sourceLine" id="cb17-46" data-line-number="46">  <span class="co">#     Allow from all</span></a>
<a class="sourceLine" id="cb17-47" data-line-number="47">  <span class="co"># &lt;/Directory&gt;</span></a>
<a class="sourceLine" id="cb17-48" data-line-number="48"></a>
<a class="sourceLine" id="cb17-49" data-line-number="49">  <span class="co"># logs configuration</span></a>
<a class="sourceLine" id="cb17-50" data-line-number="50">  ErrorLog ${APACHE_LOG_DIR}<span class="op">/</span>error.log</a>
<a class="sourceLine" id="cb17-51" data-line-number="51">  CustomLog ${APACHE_LOG_DIR}<span class="op">/</span>access.log combined</a>
<a class="sourceLine" id="cb17-52" data-line-number="52"></a>
<a class="sourceLine" id="cb17-53" data-line-number="53"><span class="op">&lt;/</span>VirtualHost<span class="op">&gt;</span></a></code></pre></div>
<p>Note:
- ensure group has permission to database and log directories.</p>
<p>To Do:
- WSGIDaemonProcess helloworldapp user=www-data group=www-data threads=5
- WSGIProcessGroup
- Multiple Apps: Apache virtualhost is only for domain/sub-domain, to add more apps with different directories, add directory tags to configuration file. If the two Flask apps are running on the same domain just as subfolders, then you only need one VirtualHost but you’ll need multiple WSGIScriptAlias directives.</p>
<p>Links:
- <a href="https://stackoverflow.com/questions/29882579/run-multiple-independent-flask-apps-in-ubuntu">Muiltiple flask apps usgin Apache2 and Ubuntu</a>.</p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exercises-on-data-science.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sqls.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/iyadavvaibhav/vybook/edit/master/web_dev/web_server.md",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
